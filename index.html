<!-- <!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://furcan.github.io/KioskBoard/kioskboard-aio-2.1.0.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css">
    </link>

    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js"></script>
    <script type="text/javascript" src="https://codemirror.net/mode/clike/clike.js"></script>

</head>

<body>
    <textarea id="code" name="code" class="js-kioskboard-input" data-kioskboard-type="keyboard" data-kioskboard-placement="bottom"></textarea>


    <script>
        
        // Initialize KioskBoard (default/all options)
        KioskBoard.run('.js-kioskboard-input', {
            /*!
            * Required
            * An Array of Objects has to be defined for the custom keys. Hint: Each object creates a row element (HTML) on the keyboard.
            * e.g. [{"key":"value"}, {"key":"value"}] => [{"0":"A","1":"B","2":"C"}, {"0":"D","1":"E","2":"F"}]
            */
            keysArrayOfObjects: [
                {
                    "0": "A",
                    "1": "B",
                    "2": "C"
                },
                {
                    "0": "D",
                    "1": "\n",
                    "2": ";"
                }
            ],

            /*!
            * Required only if "keysArrayOfObjects" is "null".
            * The path of the "kioskboard-keys-${langugage}.json" file must be set to the "keysJsonUrl" option. (XMLHttpRequest to get the keys from JSON file.)
            * e.g. '/Content/Plugins/KioskBoard/dist/kioskboard-keys-english.json'
            */
            /*keysJsonUrl: "kioskboard-keys-english.json",*/

            // Optional: (Other Options)

            // Language Code (ISO 639-1) for custom keys (for language support) => e.g. "de" || "en" || "fr" || "hu" || "tr" etc...
            language: 'en',

            // The theme of keyboard => "light" || "dark" || "flat" || "material" || "oldschool"
            theme: 'dark',

            // Uppercase or lowercase to start. Uppercased when "true"
            capsLockActive: false,

            /*
            * Allow or prevent real/physical keyboard usage. Prevented when "false"
            * In addition, the "allowMobileKeyboard" option must be "true" as well, if the real/physical keyboard has wanted to be used.
            */
            allowRealKeyboard: false,

            // Allow or prevent mobile keyboard usage. Prevented when "false"
            allowMobileKeyboard: true,

            // CSS animations for opening or closing the keyboard
            cssAnimations: false,

            // CSS animations duration as millisecond
            cssAnimationsDuration: 0,

            // CSS animations style for opening or closing the keyboard => "slide" || "fade"
            cssAnimationsStyle: 'slide',

            // Enable or Disable Spacebar functionality on the keyboard. The Spacebar will be passive when "false"
            keysAllowSpacebar: true,

            // Font family of the keys
            keysFontFamily: 'sans-serif',

            // Font size of the keys
            keysFontSize: '22px',

            // Font weight of the keys
            keysFontWeight: 'normal',

            // Size of the icon keys
            keysIconSize: '25px',

            // Scrolls the document to the top or bottom(by the placement option) of the input/textarea element. Prevented when "false"
            autoScroll: true,
        });

        function triggerFocus(element) {
            var eventType = "onfocusin" in element ? "focusin" : "focus",
                bubbles = "onfocusin" in element,
                event;

            if ("createEvent" in document) {
                event = document.createEvent("Event");
                event.initEvent(eventType, bubbles, true);
            }
            else if ("Event" in window) {
                event = new Event(eventType, { bubbles: bubbles, cancelable: true });
            }

            element.focus();
            element.dispatchEvent(event);
        }
        

        window.onload = function () {
            const editor = CodeMirror.fromTextArea(document.getElementById("code"), {
                mode: "text/x-c++src",
                lineNumbers: true,
                lineWrapping: true,
                extraKeys: { "Ctrl-Q": function (cm) { cm.foldCode(cm.getCursor()); } },
                foldGutter: true,
                gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
            })
            
            editor.on('focus', editor => {
                console.log('focus');
                triggerFocus(document.getElementById("code"));
            });

            editor.on('blur', editor => {
                console.log('blur');
                triggerFocus(document.getElementById("code"));
            });

            document.getElementById("code").addEventListener("change", e => {
                editor.setValue(document.getElementById("code").value);
            });
        };
    </script>
</body>

</html> -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #wrap {
            width: 99%;
            height: 95vh;
        }

        #editor-container {
            height: 375px;
        }
    </style>
    <script type="text/javascript" src="//code.jquery.com/jquery-1.9.1.js"></script>
    <link rel="stylesheet" href="https://mottie.github.io/Keyboard/css/keyboard.css">
    </link>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/ui-lightness/jquery-ui.css">
    </link>
    <script type="text/javascript" src="https://mottie.github.io/Keyboard/js/jquery.keyboard.js"></script>
    <script type="text/javascript" src="https://mottie.github.io/Keyboard/js/jquery.mousewheel.js"></script>
    <script type="text/javascript"
        src="https://mottie.github.io/Keyboard/js/jquery.keyboard.extension-typing.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.css">
    </link>
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.16.0/codemirror.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <script type="text/javascript" src="https://codemirror.net/mode/clike/clike.js"></script>


    <!--  -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/styles/default.min.css">
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.0/highlight.min.js"></script>

    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
</head>

<body>
    <button onclick="compile()">Compile (g++ -std=c++20 -O2 -Wall -pedantic -pthread main.cpp)</button>

    <div id="wrap">
        <textarea id="keyboard" rows="52" cols="80" placeholder="Enter Text..." style="width:98%;"></textarea>
    </div>

    <button onclick="compileQuill()">Compile (g++ -std=c++20 -O2 -Wall -pedantic -pthread main.cpp)</button>
    <div id="editor-container">
<pre>
// Your First C++ Program
#include &lt;iostream&gt;

int main() {
    std::cout << "Hello World!";
    return 0;
}
</pre>
    </div>

    <script>

        function compile() {
            const value = window.editor.getValue();

            fetch("http://coliru.stacked-crooked.com/compile", {
                headers: {
                    accept: "*/*",
                    "content-type": "text/plain;charset=UTF-8"
                },
                body: JSON.stringify({
                    cmd: "g++ -std=c++20 -O2 -Wall -pedantic -pthread main.cpp && ./a.out",
                    src: value
                }),
                redirect: 'follow',
                method: "POST"
            })
                .then(response => response.text())
                .then(data => {
                    alert('Success:' + data);
                })
                .catch((error) => {
                    alert('Error: ' + error);
                });
        }

        function compileQuill() {
            var value = window.quill.getText();

            debugger;
            fetch("http://coliru.stacked-crooked.com/compile", {
                headers: {
                    accept: "*/*",
                    "content-type": "text/plain;charset=UTF-8"
                },
                body: JSON.stringify({
                    cmd: "g++ -std=c++20 -O2 -Wall -pedantic -pthread main.cpp && ./a.out",
                    src: value
                }),
                redirect: 'follow',
                method: "POST"
            })
            .then(response => response.text())
            .then(data => {
                alert('Success:' + data);
            })
            .catch((error) => {
                alert('Error: ' + error);
            });
        }

        hljs.configure({   // optionally configure hljs
            languages: ['javascript', 'cpp', 'python']
        });


        window.quill = new Quill('#editor-container', {
            modules: {
                syntax: true,              // Include syntax module
                toolbar: [['code-block']]  // Include button in toolbar
            },
            theme: 'snow'  // or 'bubble'
        });

        $(window).load(function () {
            window.editor = CodeMirror.fromTextArea($('#keyboard')[0], {
                lineNumbers: true,
                mode: "text/x-c++src"
            })

            const input = editor.getInputField();

            editor.setValue
                (`// Your First C++ Program

#include <iostream>

int main() {
    std::cout << "Hello World!";
    return 0;
}
`);

            $.extend($.keyboard.keyaction, {
                delete: function (base) {
                    editor.execCommand('delCharBefore');
                },
                left: function (base) {
                    editor.execCommand('goCharLeft');
                },
                right: function (base) {
                    editor.execCommand('goCharRight');
                }
            });

            $(input).keyboard({
                keyBinding: "mousedown touchstart",
                usePreview: false,
                autoAccept: true,
                alwaysOpen: true,
                position: {
                    of: $("#wrap"),
                    my: 'center bottom',
                    at: 'center bottom',
                    at2: 'center bottom'
                },
                layout: 'custom',
                customLayout: {

                    'normal': [
                        '` 1 2 3 4 5 6 7 8 9 0 - = {bksp}',
                        '~ ! @ # $ % ^ & * ( ) _ + ',
                        '{tab} q w e r t y u i o p [ ] { } | \\',
                        'a s d f g h j k l : ; \' {enter}',
                        '{shift} z x c v b n m , . < > ? / {shift}',
                        '{space} {left} {right}'],
                    'shift': [
                        'Q W E R T Y U I O P',
                        'A S D F G H J K L',
                        '{shift} Z X C V B N M {shift}'
                    ]
                }
            });
        });
    </script>
</body>

</html>
